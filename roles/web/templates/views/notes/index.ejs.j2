<%- include('../layout', { title: 'ノート | EduNotes', body: `
<section class="container">
  <div class="hero">
    <span class="badge">学習ノート</span>
    <h1 class="hero__title">レッスンごとの学びを記録。</h1>
    <p class="hero__subtitle">検索・タグ付けで要点を整理し、学習ログを残します。</p>
  </div>

  <div class="section card">
    <div class="card__eyebrow">検索</div>
    <form method="get" action="/notes" class="form">
      <input type="text" name="q" placeholder="タイトル・キーワード・要点で検索" value="${q || ''}">
      <div style="display:flex; gap:12px; flex-wrap:wrap;">
        <button class="btn btn--primary" type="submit">検索</button>
        <a class="btn btn--ghost" href="/notes/new">新規ノート</a>
      </div>
    </form>
  </div>

  <div class="section">
    <h2 class="section__title">最近のノート</h2>
    ${rows && rows.length ? `
      <div class="grid">
        ${rows.map(n => `
          <article class="card">
            <div class="card__eyebrow">${n.is_public ? '公開ノート' : '非公開ノート'}</div>
            <h3>${n.title}</h3>
            <div class="meta">
              <span>作成者: ${n.author_email}</span>
              <span>${new Date(n.created_at).toLocaleString()}</span>
            </div>
            <a class="btn btn--ghost" href="/notes/${n.id}">開く</a>
          </article>
        `).join('')}
      </div>
    ` : `
      <div class="card">
        <p>まだノートがありません。最初の学習メモを作成しましょう。</p>
        <a class="btn btn--primary" href="/notes/new">ノートを作成</a>
      </div>
    `}
  </div>
</section>
` }) %>
